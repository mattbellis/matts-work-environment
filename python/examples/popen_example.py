#!/usr/bin/env python

################################################################################
################################################################################
# Showcase some examples of calling commands in the shell using 
# the Popen command in subprocess.
################################################################################
################################################################################

import subprocess as sp
import os 

################################################################################
################################################################################
# Run the ls command so that it prints to the screen
################################################################################
cmd = ['ls']
sp.Popen(cmd,0).wait()

print "I waited to print this until the previous command had run.\n"
################################################################################

################################################################################
################################################################################
# Run the ls -ltr command so that it prints to the screen
################################################################################
cmd = ['ls', '-ltr']
sp.Popen(cmd,0).wait()

print "I waited to print this until the previous command had run."
################################################################################

################################################################################
################################################################################
# List my home directory and save to a string.
################################################################################
# Grab the $HOME environment variable
home_dir = os.environ.get("HOME")

cmd = ['ls', '-ltr']
cmd += [home_dir]
output = sp.Popen(cmd, stdout=sp.PIPE).communicate()[0]

# Print EVERYTHING!
print output
################################################################################
################################################################################

################################################################################
################################################################################
# Print only directories
print "\nPrinting only directories..."
entries = output.split()
for i,word in enumerate(entries):
    if word.find('drwx')>=0:
        print entries[i+7]
################################################################################
################################################################################
